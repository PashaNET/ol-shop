!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var s=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this._$=i,this._$el=i(t),this._params=n||{},this._initSelect2(),this._initEvents())}var t,n,s;return t=e,(n=[{key:"setValue",value:function(e){this._$el&&this._$el.val(e).trigger("change.select2")}},{key:"getValue",value:function(){return this._$el.val()}},{key:"setOptions",value:function(e){var t="";this._params.placeholder&&e.unshift({value:"",name:this._params.placeholder}),e.forEach((function(e){t+='<option value="'.concat(e.value,'">').concat(e.name,"</option>")})),this.setOptionsHtml(t),this._hasMirror()&&this._getMirror().setOptionsHtml(t),this._params.ajax&&this._params.ajax.target().setOptions([])}},{key:"setOptionsHtml",value:function(e){this._$el&&this._$el.html(e)}},{key:"_initSelect2",value:function(){var e=this;"function"==typeof this._$.fn.select2&&this._$el.select2({sorter:function(t){return t.sort((function(n,i){var s=e._$(".select2-search__field");if(0===s.length||""===s.val())return t;var a=n.text.toLowerCase(),r=i.text.toLowerCase(),o=s.val().toLowerCase();return a.indexOf(o)<r.indexOf(o)?-1:a.indexOf(o)>r.indexOf(o)?1:0})),t},language:{noResults:function(){return wc_ukr_shipping_globals.i10n.not_found}}})}},{key:"_initEvents",value:function(){var e=this;e._$el.on("change",(function(){e._hasMirror()&&e._getMirror().setValue(e.getValue()),e._params.ajax&&e._getAjaxData()}))}},{key:"_getAjaxData",value:function(){var e=this;e._trigger("beforeRequest");var t={action:e._params.ajax.action,_token:wc_ukr_shipping_globals.nonce,value:e.getValue()};"function"==typeof e._params.ajax.params&&(t=Object.assign(t,e._params.ajax.params())),e._$.ajax({method:"POST",url:wc_ukr_shipping_globals.ajaxUrl,data:t,dataType:"json",success:function(t){e._trigger("response",{data:t.data}),t.success&&e._params.ajax.target().setOptions(t.data.items)},error:function(t,n,i){e._trigger("response"),console.error("WCUS Error: ".concat(t.status," ").concat(t.statusText))}})}},{key:"_hasMirror",value:function(){return"function"==typeof this._params.mirror}},{key:"_getMirror",value:function(){return this._params.mirror()}},{key:"_trigger",value:function(e,t){this._params.events&&"function"==typeof this._params.events[e]&&this._params.events[e](this,t||{})}}])&&i(t.prototype,n),s&&i(t,s),e}(),a={init:function(e){this._$=e,this.$differentShipping=this._$("#ship-to-different-address-checkbox")},setLoadingState:function(){this._$(".wc-ukr-shipping-np-fields").addClass("wcus-state-loading")},unsetLoadingState:function(){this._$(".wc-ukr-shipping-np-fields").removeClass("wcus-state-loading")},getFieldType:function(){return this.$differentShipping.length&&this.$differentShipping.prop("checked")?"shipping":"billing"},isCustomAddress:function(){var e=this.getFieldType();return this._$("#wcus_np_"+e+"_custom_address_active").prop("checked")?1:0},getAreaRef:function(){var e=this.getFieldType();return this._$("#wcus_np_"+e+"_area").val()},getCityRef:function(){var e=this.getFieldType();return this._$("#wcus_np_"+e+"_city").val()},mergeSelectParams:function(e){var t=this;return Object.assign({events:{beforeRequest:function(e){t.setLoadingState()},response:function(e){t.unsetLoadingState()}},i10n:{noResult:wc_ukr_shipping_globals.i10n.not_found}},e)}};!function(e){var t=document.getElementById("ship-to-different-address-checkbox");function n(){a.getCityRef()&&(e("#place_order").prop("disabled",!0),e.ajax({method:"POST",url:wc_ukr_shipping_globals.ajaxUrl,data:{action:"wcus_api_v2_calculate_cost",_token:wc_ukr_shipping_globals.nonce,wcus_ajax:1,wcus_area_ref:a.getAreaRef(),wcus_city_ref:a.getCityRef(),wcus_address_shipping:a.isCustomAddress(),wcus_payment_method:e('input[name="payment_method"]:checked').val(),wcus_shipping_name:e("#wcus-shipping-name").val()},dataType:"json",success:function(t){e("#place_order").prop("disabled",!1),t.success&&(e("#wcus-shipping-cost").html(t.data.shipping),e("#wcus-order-total").html("<strong>".concat(t.data.total,"</strong>")))},error:function(t,n,i){e("#place_order").prop("disabled",!1),console.error("WCUS Error: ".concat(t.status," ").concat(t.statusText))}}))}a.init(e);var i=function(){var t=e(".shipping_method").length>1?e(".shipping_method:checked").val():e(".shipping_method").val();return t&&t.match(/^nova_poshta_shipping.+/i)};t&&t.addEventListener("click",(function(){i()&&(this.checked?(e("#wcus_np_shipping_fields").css("display","block"),e("#wcus_np_billing_fields").css("display","none")):(e("#wcus_np_shipping_fields").css("display","none"),e("#wcus_np_billing_fields").css("display","block")))}));var r=function(){var t=e(".j-wcus-np-custom-address");t.length&&t.on("click",(function(){var t=document.getElementById(this.dataset.relationSelect);t&&(t.checked=this.checked),this.checked?(e(".j-wcus-warehouse-block").slideUp(400),e(".j-wcus-np-custom-address-block").slideDown(400)):(e(".j-wcus-warehouse-block").slideDown(400),e(".j-wcus-np-custom-address-block").slideUp(400)),n()}))};e((function(){var o,c,l,u,p,_;e(".wc-ukr-shipping-np-fields").css("display","none"),e(document.body).bind("update_checkout",(function(e,t){a.setLoadingState()})),e(document.body).bind("updated_checkout",(function(n,s){"UA"===(e("#billing_country").length?e("#billing_country").val():"UA")&&i()?t&&t.checked?e("#wcus_np_shipping_fields").css("display","block"):e("#wcus_np_billing_fields").css("display","block"):e(".wc-ukr-shipping-np-fields").css("display","none"),i()&&"true"===wc_ukr_shipping_globals.disableDefaultBillingFields?(e("#billing_address_1_field").css("display","none"),e("#billing_address_2_field").css("display","none"),e("#billing_city_field").css("display","none"),e("#billing_state_field").css("display","none"),e("#billing_postcode_field").css("display","none"),e("#shipping_address_1_field").css("display","none"),e("#shipping_address_2_field").css("display","none"),e("#shipping_city_field").css("display","none"),e("#shipping_state_field").css("display","none"),e("#shipping_postcode_field").css("display","none")):(e("#billing_address_1_field").css("display","block"),e("#billing_address_2_field").css("display","block"),e("#billing_city_field").css("display","block"),e("#billing_state_field").css("display","block"),e("#billing_postcode_field").css("display","block"),e("#shipping_address_1_field").css("display","block"),e("#shipping_address_2_field").css("display","block"),e("#shipping_city_field").css("display","block"),e("#shipping_state_field").css("display","block"),e("#shipping_postcode_field").css("display","block")),a.unsetLoadingState()})),o=new s(document.getElementById("wcus_np_billing_area"),a.mergeSelectParams({mirror:function(){return c},ajax:{action:"wcus_api_v2_get_cities",target:function(){return l}},placeholder:wc_ukr_shipping_globals.i10n.placeholder_area}),e),c=new s(document.getElementById("wcus_np_shipping_area"),a.mergeSelectParams({mirror:function(){return o},ajax:{action:"wcus_api_v2_get_cities",target:function(){return u}},placeholder:wc_ukr_shipping_globals.i10n.placeholder_area}),e),l=new s(document.getElementById("wcus_np_billing_city"),a.mergeSelectParams({mirror:function(){return u},ajax:{action:"wcus_api_v2_get_warehouses",target:function(){return p}},events:{beforeRequest:function(e){a.setLoadingState(),n()},response:function(e,t){a.unsetLoadingState()}},placeholder:wc_ukr_shipping_globals.i10n.placeholder_city}),e),u=new s(document.getElementById("wcus_np_shipping_city"),a.mergeSelectParams({mirror:function(){return l},ajax:{action:"wcus_api_v2_get_warehouses",target:function(){return _}},events:{beforeRequest:function(e){a.setLoadingState(),n()},response:function(e,t){a.unsetLoadingState()}},placeholder:wc_ukr_shipping_globals.i10n.placeholder_city}),e),p=new s(document.getElementById("wcus_np_billing_warehouse"),a.mergeSelectParams({mirror:function(){return _},placeholder:wc_ukr_shipping_globals.i10n.placeholder_warehouse}),e),_=new s(document.getElementById("wcus_np_shipping_warehouse"),a.mergeSelectParams({mirror:function(){return p},placeholder:wc_ukr_shipping_globals.i10n.placeholder_warehouse}),e),e("body").on("change",'input[name="payment_method"]',(function(){n()})),r()}))}(jQuery)}]);